(self["webpackJsonp_cfs-console"]=self["webpackJsonp_cfs-console"]||[]).push([[893],{49715:function(t,e,n){"use strict";var i,o,a,r,s,l,c,u,d,m,h,p,g,f,v,y,x,b,_,S,$=n(2106),k=n(4969),C={queryVolList:(0,k.ZP)(i||(i=(0,$.Z)(["\n    query volList($cluster: String, $keywords: String) {\n      volList(cluster: $cluster, keywords: $keywords)\n    }\n  "]))),volMigrateStatus:(0,k.ZP)(o||(o=(0,$.Z)(["\n    query volMigrateStatus($cluster: String, $taskID: int) {\n      volMigrateStatus(cluster: $cluster, taskID: $taskID) {\n        status\n        volMigrateInfos {\n          name\n          status\n          migratePartitionCount\n          totalCount\n        }\n      }\n    }\n  "]))),migrateConfigList:(0,k.ZP)(a||(a=(0,$.Z)(["\n    query migrateConfigList($cluster: String, $page: Int, $pageSize: Int) {\n      migrateConfigList(cluster: $cluster, page: $page, pageSize: $pageSize) {\n        total\n        data {\n          cluster\n          volume\n          smart\n          compact\n          migrateBack\n          rules\n          rulesType\n          timeUnit\n          timeValue\n          hddDirs\n          createAt\n          updateAt\n        }\n      }\n    }\n  "]))),volMigrateList:(0,k.ZP)(r||(r=(0,$.Z)(["\n    query volMigrateList(\n      $cluster: String\n      $module: String\n      $zone: String\n      $status: Int\n      $volume: String\n      $page: Int\n      $pageSize: Int\n    ) {\n      volMigrateList(\n        cluster: $cluster\n        module: $module\n        zone: $zone\n        status: $status\n        volume: $volume\n        page: $page\n        pageSize: $pageSize\n      ) {\n        total\n        data {\n          taskID\n          cluster\n          module\n          volumes\n          status\n          srcZone\n          dstZone\n          clusterConcurrency\n          volConcurrency\n          partitionConcurrency\n          waitSeconds\n          dstDataNodeUsageRatio\n          dstMetaPartitionLimit\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),zoneList:(0,k.ZP)(s||(s=(0,$.Z)(["\n    query zoneList($cluster: String) {\n      zoneList(cluster: $cluster)\n    }\n  "]))),dropdownList:(0,k.ZP)(l||(l=(0,$.Z)(["\n    query dropdownList($cluster: String, $name: String, $taskType: Int) {\n      dropdownList(cluster: $cluster, name: $name, taskType: $taskType) {\n        opCode\n        opMsg\n      }\n    }\n  "]))),rebalanceList:(0,k.ZP)(c||(c=(0,$.Z)(["\n    query rebalanceList(\n      $cluster: String\n      $module: String\n      $zone: String\n      $status: Int\n      $taskType: Int\n      $page: Int\n      $pageSize: Int\n    ) {\n      rebalanceList(\n        cluster: $cluster\n        module: $module\n        zone: $zone\n        status: $status\n        taskType: $taskType\n        page: $page\n        pageSize: $pageSize\n      ) {\n        total\n        data {\n          taskID\n          cluster\n          module\n          taskType\n          zone\n          status\n          highRatio\n          lowRatio\n          goalRatio\n          concurrency\n          limitDPonDisk\n          limitMPonDstNode\n          createdAt\n          updatedAt\n        }\n      }\n    }\n  "]))),getNodeUsage:(0,k.ZP)(u||(u=(0,$.Z)(["\n    query getNodeUsage(\n      $cluster: String\n      $zone: String\n      $highRatio: int\n      $lowRatio: int\n      $module: String\n    ) {\n      getNodeUsage(\n        cluster: $cluster\n        zone: $zone\n        highRatio: $highRatio\n        lowRatio: $lowRatio\n        module: $module\n      ) {\n        avgUsageRatio\n        avgPartitionCnt\n        nodes {\n          addr\n          usedRatio\n          partitionCount\n        }\n      }\n    }\n  "]))),resetVolMigrate:(0,k.ZP)(d||(d=(0,$.Z)(["\n    mutation resetVolMigrate(\n      $cluster: String\n      $taskID: int\n      $clusterConcurrency: int32\n      $volConcurrency: int32\n      $partitionConcurrency: int32\n      $waitSeconds: int32\n    ) {\n      resetVolMigrate(\n        cluster: $cluster\n        taskID: $taskID\n        clusterConcurrency: $clusterConcurrency\n        volConcurrency: $volConcurrency\n        partitionConcurrency: $partitionConcurrency\n        waitSeconds: $waitSeconds\n      )\n    }\n  "]))),stopVolMigrate:(0,k.ZP)(m||(m=(0,$.Z)(["\n    mutation stopVolMigrate($cluster: String, $taskID: int) {\n      stopVolMigrate(cluster: $cluster, taskID: $taskID)\n    }\n  "]))),createMigrateConfig:(0,k.ZP)(h||(h=(0,$.Z)(["\n    mutation createMigrateConfig(\n      $cluster: String\n      $volList: [list]\n      $hddDirs: String\n      $smart: int32\n      $migrateBack: int32\n      $compact: int32\n      $rulesType: int32\n      $timeValue: int32\n      $timeUnit: int32\n    ) {\n      createMigrateConfig(\n        cluster: $cluster\n        volList: $volList\n        hddDirs: $hddDirs\n        smart: $smart\n        migrateBack: $migrateBack\n        compact: $compact\n        rulesType: $rulesType\n        timeValue: $timeValue\n        timeUnit: $timeUnit\n      )\n    }\n  "]))),volStorageDetails:(0,k.ZP)(p||(p=(0,$.Z)(["\n    query volStorageDetails(\n      $cluster: String\n      $volume: String\n      $interval: Int\n      $start: Uint64\n      $end: Uint64\n    ) {\n      volStorageDetails(\n        cluster: $cluster\n        volume: $volume\n        interval: $interval\n        start: $start\n        end: $end\n      ) {\n        updateAt\n        hddCapacity\n        ssdCapacity\n      }\n    }\n  "]))),updateMigrateConfig:(0,k.ZP)(g||(g=(0,$.Z)(["\n    mutation updateMigrateConfig(\n      $cluster: String\n      $volList: [list]\n      $hddDirs: String\n      $smart: int32\n      $migrateBack: int32\n      $compact: int32\n      $rulesType: int32\n      $timeValue: int32\n      $timeUnit: int32\n    ) {\n      updateMigrateConfig(\n        cluster: $cluster\n        volList: $volList\n        hddDirs: $hddDirs\n        smart: $smart\n        migrateBack: $migrateBack\n        compact: $compact\n        rulesType: $rulesType\n        timeValue: $timeValue\n        timeUnit: $timeUnit\n      )\n    }\n  "]))),createVolMigrate:(0,k.ZP)(f||(f=(0,$.Z)(["\n    mutation createVolMigrate(\n      $cluster: String\n      $module: String\n      $volList: [list]\n      $srcZone: String\n      $dstZone: String\n      $clusterConcurrency: int32\n      $volConcurrency: int32\n      $partitionConcurrency: int32\n      $waitSeconds: int32\n      $dstDataNodeUsageRatio: float64\n      $dstMetaPartitionLimit: int32\n    ) {\n      createVolMigrate(\n        cluster: $cluster\n        module: $module\n        volList: $volList\n        srcZone: $srcZone\n        dstZone: $dstZone\n        clusterConcurrency: $clusterConcurrency\n        volConcurrency: $volConcurrency\n        partitionConcurrency: $partitionConcurrency\n        waitSeconds: $waitSeconds\n        dstDataNodeUsageRatio: $dstDataNodeUsageRatio\n        dstMetaPartitionLimit: $dstMetaPartitionLimit\n      )\n    }\n  "]))),createRebalanceTask:(0,k.ZP)(v||(v=(0,$.Z)(["\n    mutation createRebalanceTask(\n      $cluster: String\n      $module: String\n      $zone: String\n      $highRatio: int32\n      $lowRatio: int32\n      $goalRatio: int32\n      $concurrency: int32\n      $limitDPonDisk: int32\n      $limitMPonDstNode: int32\n    ) {\n      createRebalanceTask(\n        cluster: $cluster\n        module: $module\n        zone: $zone\n        highRatio: $highRatio\n        lowRatio: $lowRatio\n        goalRatio: $goalRatio\n        concurrency: $concurrency\n        limitDPonDisk: $limitDPonDisk\n        limitMPonDstNode: $limitMPonDstNode\n      )\n    }\n  "]))),createNodeMigrateTask:(0,k.ZP)(y||(y=(0,$.Z)(["\n    mutation createNodeMigrateTask(\n      $cluster: String\n      $module: String\n      $concurrency: int32\n      $srcNodeList: [list]\n      $dstNodeList: [list]\n      $limitDPonDisk: int32\n      $limitMPonDstNode: int32\n      $volList: [list]\n      $outRatio: float64\n    ) {\n      createNodeMigrateTask(\n        cluster: $cluster\n        module: $module\n        srcNodeList: $srcNodeList\n        dstNodeList: $dstNodeList\n        concurrency: $concurrency\n        limitDPonDisk: $limitDPonDisk\n        limitMPonDstNode: $limitMPonDstNode\n        volList: $volList\n        outRatio: $outRatio\n      )\n    }\n  "]))),stopRebalanceTask:(0,k.ZP)(x||(x=(0,$.Z)(["\n    mutation stopRebalanceTask($cluster: String, $taskID: int32) {\n      stopRebalanceTask(cluster: $cluster, taskID: $taskID)\n    }\n  "]))),resetControlRebalanceTask:(0,k.ZP)(b||(b=(0,$.Z)(["\n    mutation resetControlRebalanceTask(\n      $cluster: String\n      $taskID: int32\n      $module: String\n      $concurrency: int32\n      $taskType: int32\n      $goalRatio: int32\n      $limitDPonDisk: int32\n      $limitMPonDstNode: int32\n    ) {\n      resetControlRebalanceTask(\n        cluster: $cluster\n        taskID: $taskID\n        module: $module\n        concurrency: $concurrency\n        taskType: $taskType\n        goalRatio: $goalRatio\n        limitDPonDisk: $limitDPonDisk\n        limitMPonDstNode: $limitMPonDstNode\n      )\n    }\n  "]))),queryTaskStatus:(0,k.ZP)(_||(_=(0,$.Z)(["\n    query queryTaskStatus($taskID: int32) {\n      queryTaskStatus(taskID: $taskID) {\n        status\n        srcNodesInfo {\n          addr\n          isFinish\n          totalCount\n          migratedCount\n        }\n        dstNodesInfo {\n          addr\n          isFinish\n          totalCount\n          migratedCount\n        }\n      }\n    }\n  "]))),getConfigList:(0,k.ZP)(S||(S=(0,$.Z)(["\n    query getConfigList(\n      $cluster: String\n      $moduleType: Int\n      $operationType: int32\n      $volName: String\n    ) {\n      getConfigList(\n        cluster: $cluster\n        moduleType: $moduleType\n        operationType: $operationType\n        volName: $volName\n      ) {\n        valueName\n        valueDesc\n        valueType\n        value\n        valueForm\n      }\n    }\n  "])))};e.Z=C},28488:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cluster"},[e("el-form",{ref:"form",attrs:{inline:!0,model:t.query,rules:t.rules}},[e("el-form-item",{attrs:{label:"集群：",required:"",prop:"cluster"}},[e("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},on:{change:t.queryList},model:{value:t.query.cluster,callback:function(e){t.$set(t.query,"cluster",e)},expression:"query.cluster"}},t._l(t.clusterList,(function(t){return e("el-option",{key:t.opCode,attrs:{label:t.opMsg,value:t.opCode}})})),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"卷：",prop:"volume"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入卷"},model:{value:t.query.volume,callback:function(e){t.$set(t.query,"volume",e)},expression:"query.volume"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.queryList("reset")}}},[t._v("查询")])],1)],1),t._v(" "),e("div",{staticClass:"right pb10"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addTask}},[t._v("创建任务")])],1),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[e("el-table-column",{attrs:{prop:"volume",label:"卷",fixed:"",width:"240"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cluster",label:"集群",fixed:"",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"hddDirs",label:"迁移目录",width:"160"}}),t._v(" "),e("el-table-column",{attrs:{prop:"rules",label:"迁移规则",width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"smart",label:"迁移状态",width:"140"},scopedSlots:t._u([{key:"default",fn:function(n){return[0==n.row.smart?e("span",{staticClass:"stop task"},[t._v(" 关闭")]):t._e(),t._v(" "),1==n.row.smart?e("span",{staticClass:"success task"},[t._v(" 开启")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"compact",label:"碎片整理",width:"140"},scopedSlots:t._u([{key:"default",fn:function(n){return[0==n.row.compact?e("span",{staticClass:"stop task"},[t._v(" 关闭")]):t._e(),t._v(" "),1==n.row.compact?e("span",{staticClass:"success task"},[t._v(" 开启")]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"createAt",label:"创建时间",width:"155"}}),t._v(" "),e("el-table-column",{attrs:{prop:"updateAt",label:"更新时间",width:"155"}}),t._v(" "),e("el-table-column",{attrs:{prop:"action",label:"操作",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(n){return e("span",{staticClass:"active"},[e("span",{on:{click:function(e){return t.edit(n.row)}}},[t._v("编辑")]),t._v(" "),e("span",{on:{click:function(e){return t.goDetail(n.row)}}},[t._v("| 详情")])])}}])})],1),t._v(" "),e("div",{staticClass:"clearfix mt20"},[e("el-pagination",{staticClass:"fr",attrs:{"page-sizes":t.page.pageSizes,"page-size":t.page.pageSize,layout:"sizes, prev, pager, next",total:t.page.totalRecord},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),e("span",{staticClass:"fr page-tips pr10"},[t._v(t._s(t.$t("chubaoFS.commonTxt.eachPageShows")))])],1),t._v(" "),e("el-dialog",{attrs:{title:"创建任务",visible:t.showAdd,width:"60%"},on:{"update:visible":function(e){t.showAdd=e}}},[e("el-form",{ref:"addForm",staticClass:"normalForm",attrs:{model:t.addForm,rules:t.addRules,"label-width":"130px"}},["edit"==t.type?e("el-form-item",{attrs:{label:"集群：",prop:"cluster"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"",disabled:""},model:{value:t.addForm.cluster,callback:function(e){t.$set(t.addForm,"cluster",e)},expression:"addForm.cluster"}})],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"卷列表：",prop:"volList",required:""}},[e("el-select",{staticClass:"selectMulArea",staticStyle:{width:"300px"},attrs:{filterable:"",clearable:"",remote:"",multiple:"",placeholder:"请选择卷名","remote-method":t.searchVol,disabled:"edit"==t.type},on:{change:t.changeVol},model:{value:t.addForm.volList,callback:function(e){t.$set(t.addForm,"volList",e)},expression:"addForm.volList"}},[t._l(t.volList,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),e("div",{staticClass:"custom-choose"},[e("span",{staticClass:"click",on:{click:function(e){return t.selectAll()}}},[t._v("全选")]),t._v(" "),t.addForm.volList&&t.addForm.volList.length>0?e("span",[t._v("(已选择"+t._s(t.addForm.volList.length)+"个）")]):t._e(),t._v(" "),e("span",{staticClass:"click right",on:{click:function(e){return t.delAll()}}},[t._v("取消")])])],2)],1),t._v(" "),e("el-form-item",{attrs:{label:"迁移规则：",prop:"rulesType"}},[e("el-select",{staticStyle:{width:"300px"},on:{change:t.changeRules},model:{value:t.addForm.rulesType,callback:function(e){t.$set(t.addForm,"rulesType",e)},expression:"addForm.rulesType"}},[e("el-option",{key:1,attrs:{value:1,label:"近1天未访问"}}),t._v(" "),e("el-option",{key:2,attrs:{value:2,label:"近5天未访问"}}),t._v(" "),e("el-option",{key:3,attrs:{value:3,label:"近10天未访问"}}),t._v(" "),e("el-option",{key:4,attrs:{value:4,label:"近1月未访问"}}),t._v(" "),e("el-option",{key:0,attrs:{value:0,label:"自定义"}})],1)],1),t._v(" "),0==t.addForm.rulesType?e("el-form-item",{attrs:{label:"自定义：",prop:"timeUnit"}},[e("el-radio-group",{model:{value:t.addForm.timeUnit,callback:function(e){t.$set(t.addForm,"timeUnit",e)},expression:"addForm.timeUnit"}},[e("el-radio",{attrs:{label:0}},[t._v("\n            近\n            "),e("el-input-number",{attrs:{placeholder:"请输入",min:1},model:{value:t.addForm.second,callback:function(e){t.$set(t.addForm,"second",e)},expression:"addForm.second"}}),t._v("\n            秒\n          ")],1),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("近\n            "),e("el-input-number",{attrs:{placeholder:"请输入",min:1},model:{value:t.addForm.day,callback:function(e){t.$set(t.addForm,"day",e)},expression:"addForm.day"}}),t._v("\n            天")],1),t._v(" "),e("el-radio",{attrs:{label:2}},[e("el-input-number",{attrs:{placeholder:"请输入",min:1},model:{value:t.addForm.custom,callback:function(e){t.$set(t.addForm,"custom",e)},expression:"addForm.custom"}}),t._v("\n            以来")],1)],1)],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"目录路径：",prop:"hddDirs"}},[e("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入目录路径"},model:{value:t.addForm.hddDirs,callback:function(e){t.$set(t.addForm,"hddDirs",e)},expression:"addForm.hddDirs"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"迁移状态：",prop:"smart"}},[e("el-radio-group",{model:{value:t.addForm.smart,callback:function(e){t.$set(t.addForm,"smart",e)},expression:"addForm.smart"}},[e("el-radio",{attrs:{label:0}},[t._v("关闭")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("开启")])],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"回迁：",prop:"migrateBack"}},[e("el-radio-group",{model:{value:t.addForm.migrateBack,callback:function(e){t.$set(t.addForm,"migrateBack",e)},expression:"addForm.migrateBack"}},[e("el-radio",{attrs:{label:0}},[t._v("关闭")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("开启")])],1)],1),t._v(" "),e("el-form-item",{attrs:{label:"碎片整理：",prop:"compact"}},[e("el-radio-group",{model:{value:t.addForm.compact,callback:function(e){t.$set(t.addForm,"compact",e)},expression:"addForm.compact"}},[e("el-radio",{attrs:{label:0}},[t._v("关闭")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("开启")])],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showAdd=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)],1),t._v(" "),e("el-dialog",{attrs:{title:"详情",visible:t.showDetail,width:"60%"},on:{"update:visible":function(e){t.showDetail=e}}},[e("div",{staticClass:"detail"},[e("el-row",[e("el-col",{attrs:{span:7}},[e("span",[t._v("时间：")]),t._v(" "),e("el-button-group",[e("el-button",{attrs:{type:1==t.interval?"primary":""},on:{click:function(e){return t.changeTime(1)}}},[t._v("近1天")]),t._v(" "),e("el-button",{attrs:{type:2==t.interval?"primary":""},on:{click:function(e){return t.changeTime(2)}}},[t._v("近1周")]),t._v(" "),e("el-button",{attrs:{type:3==t.interval?"primary":""},on:{click:function(e){return t.changeTime(3)}}},[t._v("近1月")])],1)],1),t._v(" "),e("el-col",{attrs:{span:10}},[e("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"timestamp","picker-options":t.pickerOptions},model:{value:t.timerange,callback:function(e){t.timerange=e},expression:"timerange"}})],1),t._v(" "),e("el-col",{attrs:{span:1}},[e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.getChart}},[t._v("查询")])],1)],1)],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chartLoading,expression:"chartLoading"}],staticClass:"charts",attrs:{id:"chart"}})])],1)},o=[],a=n(45736),r=n(37819),s=(n(69358),n(48324),n(60228),n(47522),n(70560),n(34284),n(34338),n(79288),n(49715)),l=n(70492),c=n.n(l),u=(n(78511),n(46295),n(83062),n(21865),n(53665),{name:"file",components:{},data:function(){return{detail:{},pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},timerange:[],interval:1,showDetail:!1,chartNoData:!0,chartLoading:!1,type:"add",showAdd:!1,volList:[],addForm:{volList:[],rulesType:void 0,hddDirs:void 0,smart:void 0,migrateBack:void 0,compact:void 0,timeValue:void 0,timeUnit:void 0,second:1,day:1,custom:1},query:{cluster:void 0,volume:void 0},list:[],rules:{cluster:[{required:!0,message:"请选择集群",trigger:"blur"}]},addRules:{volList:[{required:!0,message:"请选择卷",trigger:"change"}],rulesType:[{required:!0,message:"请选择迁移规则",trigger:"change"}],hddDirs:[{required:!0,message:"请输入目录路径",trigger:"blur"}],smart:[{required:!0,message:"请选择迁移状态",trigger:"change"}],migrateBack:[{required:!0,message:"请选择是否回迁",trigger:"change"}],compact:[{required:!0,message:"请选择碎片整理",trigger:"change"}],timeUnit:[{required:!0,message:"请输入自定义规则",trigger:"change"}]},clusterList:[],page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1}}},methods:{selectAll:function(){this.addForm.volList=JSON.parse(JSON.stringify(this.volList))},delAll:function(){this.addForm.volList=[]},goDetail:function(t){this.timerange=[],this.interval=1,this.detail=t,this.showDetail=!0,this.getChart()},changeTime:function(t){this.interval=t,this.timerange=[]},getChart:function(){var t=this;if(this.timerange.length>0&&(this.interval=0),0==this.timerange.length&&0==this.interval)return this.$message.error("请选择时间"),!1;this.chartLoading=!0;var e={cluster:this.query.cluster,volume:this.detail.volume,interval:this.timerange.length>0?0:this.interval,start:this.timerange.length>0?Math.floor(this.timerange[0]/1e3):0,end:this.timerange.length>0?Math.floor(this.timerange[1]/1e3):0};this.apollo.query(this.url.consoleSchedule,s.Z.volStorageDetails,e).then((function(e){if(e.data){var n=e.data.volStorageDetails;t.chartNoData=0==n.length;var i={xData:[],series:[]},o={name:"ssd",type:"line",data:[],yAxisIndex:0},a={name:"hdd",type:"line",data:[],yAxisIndex:0};n.forEach((function(t){i.xData.push(t.updateAt),o.data.push(t.ssdCapacity),a.data.push(t.hddCapacity)})),i.series.push(o),i.series.push(a),t.initChart(i)}else t.$message.error(e);t.chartLoading=!1})).catch((function(e){console.log(e),t.$Message.error(e)}))},initChart:function(t){var e=c().init(document.getElementById("chart")),n={title:{text:"vol介质曲线",left:"center",top:"top"},color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],tooltip:{trigger:"axis",confine:!0,formatter:function(t){var e=t[0].name+" <br/>";return t.forEach((function(t){var n=t.seriesName,i=t.value,o=t.marker,a="GB";e+="".concat(o).concat(n,": ").concat(i," ").concat(a,"<br/>")})),e}},legend:{data:["ssd","hdd"],bottom:"10px"},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:t.xData},yAxis:[{axisTick:{show:!1},axisLine:{show:!1},type:"value",axisLabel:{formatter:"{value} GB"}}],series:t.series};e.setOption(n,!0)},edit:function(t){this.type="edit",Object.assign(this.addForm,t),0==this.addForm.timeUnit?this.addForm.second=this.addForm.timeValue:1==this.addForm.timeUnit?this.addForm.day=this.addForm.timeValue:2==this.addForm.timeUnit&&(this.addForm.custom=this.addForm.timeValue),this.addForm.volList=[this.addForm.volume],this.showAdd=!0},submitEdit:function(){var t=this;this.$refs.addForm.validate((function(e){e&&(0==t.addForm.timeUnit?t.addForm.timeValue=t.addForm.second:1==t.addForm.timeUnit?t.addForm.timeValue=t.addForm.day:2==t.addForm.timeUnit&&(t.addForm.timeValue=t.addForm.custom),t.apollo.mutation(t.url.consoleSchedule,s.Z.updateMigrateConfig,t.addForm).then((function(e){200==e.code?(t.showAdd=!1,t.$message.success("操作成功！"),t.queryList("reset")):t.$message.error(e)})).catch((function(e){t.$message.error(e)})))}))},submit:function(){var t=this;"edit"!=this.type?this.$refs.addForm.validate((function(e){e&&(t.addForm["cluster"]=t.query.cluster,0==t.addForm.timeUnit?t.addForm.timeValue=t.addForm.second:1==t.addForm.timeUnit?t.addForm.timeValue=t.addForm.day:2==t.addForm.timeUnit&&(t.addForm.timeValue=t.addForm.custom),t.apollo.mutation(t.url.consoleSchedule,s.Z.createMigrateConfig,t.addForm).then((function(e){200==e.code?(t.showAdd=!1,t.$message.success("操作成功！"),t.queryList("reset")):t.$message.error(e)})).catch((function(e){t.$message.error(e)})))})):this.submitEdit()},searchVol:function(t){""!=t&&this.queryVolumeList(t,"list")},changeVol:function(){},queryVolumeList:function(t){var e=this,n={keywords:t,cluster:this.query.cluster};n.cluster&&""!=n.cluster&&this.apollo.query(this.url.volume,s.Z.queryVolList,n).then((function(t){t.data?e.volList=t.data.volList||[]:e.$Message.error(t)})).catch((function(t){e.$Message.error(t)}))},addTask:function(){this.type="add",this.showAdd=!0,this.$refs["addForm"]&&this.$refs["addForm"].resetFields()},changeRules:function(){},handleSizeChange:function(t){this.page.pageNo=1,this.page.pageSize=t,this.queryList()},handleCurrentChange:function(t){this.page.pageNo=t,this.queryList()},queryList:function(t){var e=this;this.$refs.form.validate((function(n){if(n){var i={page:t&&"reset"==t?1:Number(e.page.pageNo),pageSize:t&&"reset"==t?10:Number(e.page.pageSize)};Object.assign(i,e.query),e.apollo.query(e.url.consoleSchedule,s.Z.migrateConfigList,i).then((function(t){t.data?(e.list=t.data.migrateConfigList.data?t.data.migrateConfigList.data:[],e.page.totalRecord=t.data.migrateConfigList.total):e.$message.error(t)})).catch((function(t){e.$message.error(t)}))}}))},queryCluster:function(){var t=this,e={taskType:3,name:"cluster"};return new Promise((function(n,i){t.apollo.query(t.url.consoleSchedule,s.Z.dropdownList,e).then((function(e){e.data?(t.clusterList=e.data.dropdownList?e.data.dropdownList:[],t.query.cluster=e.data.dropdownList.length>0?e.data.dropdownList[0].opCode:void 0):t.$message.error(e),n(e.data.dropdownList)})).catch((function(e){t.$message.error(e),i(e)}))}))},init:function(){var t=this;return(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.queryCluster();case 2:t.queryList();case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.init()}}),d=u,m=n(1001),h=(0,m.Z)(d,i,o,!1,null,"6f91251e",null),p=h.exports},66351:function(t,e,n){var i=n(33051),o=n(41525),a=o.createSymbol,r=n(51177),s=n(85669),l=s.parsePercent,c=n(33140),u=c.getDefaultLabel;function d(t,e,n){r.Group.call(this),this.updateData(t,e,n)}var m=d.prototype,h=d.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function p(t){return[t[0]/2,t[1]/2]}function g(t,e){this.parent.drift(t,e)}m._createSymbol=function(t,e,n,i,o){this.removeAll();var r=e.getItemVisual(n,"color"),s=a(t,-1,-1,2,2,r,o);s.attr({z2:100,culling:!0,scale:p(i)}),s.drift=g,this._symbolType=t,this.add(s)},m.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},m.getSymbolPath=function(){return this.childAt(0)},m.getScale=function(){return this.childAt(0).scale},m.highlight=function(){this.childAt(0).trigger("emphasis")},m.downplay=function(){this.childAt(0).trigger("normal")},m.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},m.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},m.updateData=function(t,e,n){this.silent=!1;var i=t.getItemVisual(e,"symbol")||"circle",o=t.hostModel,a=h(t,e),s=i!==this._symbolType;if(s){var l=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(i,t,e,a,l)}else{var c=this.childAt(0);c.silent=!1,r.updateProps(c,{scale:p(a)},o,e)}if(this._updateCommon(t,e,a,n),s){c=this.childAt(0);var u=n&&n.fadeIn,d={scale:c.scale.slice()};u&&(d.style={opacity:c.style.opacity}),c.scale=[0,0],u&&(c.style.opacity=0),r.initProps(c,d,o,e)}this._seriesModel=o};var f=["itemStyle"],v=["emphasis","itemStyle"],y=["label"],x=["emphasis","label"];function b(t,e){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===e){var n=this.__symbolOriginalScale,i=n[1]/n[0],o={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*i)]};this.animateTo(o,400,"elasticOut")}else"normal"===e&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}m._updateCommon=function(t,e,n,o){var a=this.childAt(0),s=t.hostModel,c=t.getItemVisual(e,"color");"image"!==a.type?a.useStyle({strokeNoScale:!0}):a.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var d=o&&o.itemStyle,m=o&&o.hoverItemStyle,h=o&&o.symbolOffset,g=o&&o.labelModel,_=o&&o.hoverLabelModel,S=o&&o.hoverAnimation,$=o&&o.cursorStyle;if(!o||t.hasItemOption){var k=o&&o.itemModel?o.itemModel:t.getItemModel(e);d=k.getModel(f).getItemStyle(["color"]),m=k.getModel(v).getItemStyle(),h=k.getShallow("symbolOffset"),g=k.getModel(y),_=k.getModel(x),S=k.getShallow("hoverAnimation"),$=k.getShallow("cursor")}else m=i.extend({},m);var C=a.style,A=t.getItemVisual(e,"symbolRotate");a.attr("rotation",(A||0)*Math.PI/180||0),h&&a.attr("position",[l(h[0],n[0]),l(h[1],n[1])]),$&&a.attr("cursor",$),a.setColor(c,o&&o.symbolInnerColor),a.setStyle(d);var w=t.getItemVisual(e,"opacity");null!=w&&(C.opacity=w);var L=t.getItemVisual(e,"liftZ"),D=a.__z2Origin;null!=L?null==D&&(a.__z2Origin=a.z2,a.z2+=L):null!=D&&(a.z2=D,a.__z2Origin=null);var M=o&&o.useNameLabel;function I(e,n){return M?t.getName(e):u(t,e)}r.setLabelStyle(C,m,g,_,{labelFetcher:s,labelDataIndex:e,defaultText:I,isRectText:!0,autoColor:c}),a.__symbolOriginalScale=p(n),a.hoverStyle=m,a.highDownOnUpdate=S&&s.isAnimationEnabled()?b:null,r.setHoverStyle(a)},m.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,(!e||!e.keepLabel)&&(n.style.text=null),r.updateProps(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},i.inherits(d,r.Group);var _=d;t.exports=_},68162:function(t,e,n){var i=n(51177),o=n(66351),a=n(33051),r=a.isObject;function s(t){this.group=new i.Group,this._symbolCtor=t||o}var l=s.prototype;function c(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function u(t){return null==t||r(t)||(t={isIgnore:t}),t||{}}function d(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}l.updateData=function(t,e){e=u(e);var n=this.group,o=t.hostModel,a=this._data,r=this._symbolCtor,s=d(t);a||n.removeAll(),t.diff(a).add((function(i){var o=t.getItemLayout(i);if(c(t,o,i,e)){var a=new r(t,i,s);a.attr("position",o),t.setItemGraphicEl(i,a),n.add(a)}})).update((function(l,u){var d=a.getItemGraphicEl(u),m=t.getItemLayout(l);c(t,m,l,e)?(d?(d.updateData(t,l,s),i.updateProps(d,{position:m},o)):(d=new r(t,l),d.attr("position",m)),n.add(d),t.setItemGraphicEl(l,d)):n.remove(d)})).remove((function(t){var e=a.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}))})).execute(),this._data=t},l.isPersistent=function(){return!0},l.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl((function(e,n){var i=t.getItemLayout(n);e.attr("position",i)}))},l.incrementalPrepareUpdate=function(t){this._seriesScope=d(t),this._data=null,this.group.removeAll()},l.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}n=u(n);for(var o=t.start;o<t.end;o++){var a=e.getItemLayout(o);if(c(e,a,o,n)){var r=new this._symbolCtor(e,o,this._seriesScope);r.traverse(i),r.attr("position",a),this.group.add(r),e.setItemGraphicEl(o,r)}}},l.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()};var m=s;t.exports=m},22963:function(t,e,n){var i=n(51177),o=n(85669),a=o.round;function r(t,e,n){var o=t.getArea(),a=t.getBaseAxis().isHorizontal(),r=o.x,s=o.y,l=o.width,c=o.height,u=n.get("lineStyle.width")||2;r-=u/2,s-=u/2,l+=u,c+=u,r=Math.floor(r),l=Math.round(l);var d=new i.Rect({shape:{x:r,y:s,width:l,height:c}});return e&&(d.shape[a?"width":"height"]=0,i.initProps(d,{shape:{width:l,height:c}},n)),d}function s(t,e,n){var o=t.getArea(),r=new i.Sector({shape:{cx:a(t.cx,1),cy:a(t.cy,1),r0:a(o.r0,1),r:a(o.r,1),startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});return e&&(r.shape.endAngle=o.startAngle,i.initProps(r,{shape:{endAngle:o.endAngle}},n)),r}function l(t,e,n){return t?"polar"===t.type?s(t,e,n):"cartesian2d"===t.type?r(t,e,n):null:null}e.createGridClipPath=r,e.createPolarClipPath=s,e.createClipPath=l},33140:function(t,e,n){var i=n(68540),o=i.retrieveRawValue;function a(t,e){var n=t.mapDimension("defaultedLabel",!0),i=n.length;if(1===i)return o(t,e,n[0]);if(i){for(var a=[],r=0;r<n.length;r++){var s=o(t,e,n[r]);a.push(s)}return a.join(" ")}}e.getDefaultLabel=a},46295:function(t,e,n){var i=n(70492);n(39790),n(81950);var o=n(34586),a=n(21149),r=n(64088);n(84617),i.registerVisual(o("line","circle","line")),i.registerLayout(a("line")),i.registerProcessor(i.PRIORITY.PROCESSOR.STATISTIC,r("line"))},39790:function(t,e,n){var i=n(38175),o=(i.__DEV__,n(40488)),a=n(93321),r=a.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return o(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});t.exports=r},81950:function(t,e,n){var i=n(38175),o=(i.__DEV__,n(33051)),a=n(3726),r=a.fromPoints,s=n(68162),l=n(66351),c=n(21068),u=n(51177),d=n(32234),m=n(30633),h=m.Polyline,p=m.Polygon,g=n(75797),f=n(89385),v=f.prepareDataCoordInfo,y=f.getStackedOnPoint,x=n(22963),b=x.createGridClipPath,_=x.createPolarClipPath;function S(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var i=t[n],o=e[n];if(i[0]!==o[0]||i[1]!==o[1])return}return!0}}function $(t,e){var n=[],i=[],o=[],a=[];return r(t,n,i),r(e,o,a),Math.max(Math.abs(n[0]-o[0]),Math.abs(n[1]-o[1]),Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]))}function k(t){return"number"===typeof t?t:t?.5:0}function C(t,e,n){if(!n.valueDim)return[];for(var i=[],o=0,a=e.count();o<a;o++)i.push(y(n,t,e,o));return i}function A(t,e,n){for(var i=e.getBaseAxis(),o="x"===i.dim||"radius"===i.dim?0:1,a=[],r=0;r<t.length-1;r++){var s=t[r+1],l=t[r];a.push(l);var c=[];switch(n){case"end":c[o]=s[o],c[1-o]=l[1-o],a.push(c);break;case"middle":var u=(l[o]+s[o])/2,d=[];c[o]=d[o]=u,c[1-o]=l[1-o],d[1-o]=s[1-o],a.push(c),a.push(d);break;default:c[o]=l[o],c[1-o]=s[1-o],a.push(c)}}return t[r]&&a.push(t[r]),a}function w(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var i,a,r=n.length-1;r>=0;r--){var s=n[r].dimension,l=t.dimensions[s],c=t.getDimensionInfo(l);if(i=c&&c.coordDim,"x"===i||"y"===i){a=n[r];break}}if(a){var d=e.getAxis(i),m=o.map(a.stops,(function(t){return{coord:d.toGlobalCoord(d.dataToCoord(t.value)),color:t.color}})),h=m.length,p=a.outerColors.slice();h&&m[0].coord>m[h-1].coord&&(m.reverse(),p.reverse());var g=10,f=m[0].coord-g,v=m[h-1].coord+g,y=v-f;if(y<.001)return"transparent";o.each(m,(function(t){t.offset=(t.coord-f)/y})),m.push({offset:h?m[h-1].offset:.5,color:p[1]||"transparent"}),m.unshift({offset:h?m[0].offset:.5,color:p[0]||"transparent"});var x=new u.LinearGradient(0,0,0,0,m,!0);return x[i]=f,x[i+"2"]=v,x}}}function L(t,e,n){var i=t.get("showAllSymbol"),a="auto"===i;if(!i||a){var r=n.getAxesByScale("ordinal")[0];if(r&&(!a||!D(r,e))){var s=e.mapDimension(r.dim),l={};return o.each(r.getViewLabels(),(function(t){l[t.tickValue]=1})),function(t){return!l.hasOwnProperty(e.get(s,t))}}}}function D(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var o=e.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*l.getSymbolSize(e,r)[t.isHorizontal()?1:0]>i)return!1;return!0}function M(t,e,n){if("cartesian2d"===t.type){var i=t.getBaseAxis().isHorizontal(),o=b(t,e,n);if(!n.get("clip",!0)){var a=o.shape,r=Math.max(a.width,a.height);i?(a.y-=r,a.height+=2*r):(a.x-=r,a.width+=2*r)}return o}return _(t,e,n)}var I=g.extend({type:"line",init:function(){var t=new u.Group,e=new s;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var i=t.coordinateSystem,a=this.group,r=t.getData(),s=t.getModel("lineStyle"),l=t.getModel("areaStyle"),c=r.mapArray(r.getItemLayout),u="polar"===i.type,d=this._coordSys,m=this._symbolDraw,h=this._polyline,p=this._polygon,g=this._lineGroup,f=t.get("animation"),y=!l.isEmpty(),x=l.get("origin"),b=v(i,r,x),_=C(i,r,b),$=t.get("showSymbol"),D=$&&!u&&L(t,r,i),I=this._data;I&&I.eachItemGraphicEl((function(t,e){t.__temp&&(a.remove(t),I.setItemGraphicEl(e,null))})),$||m.remove(),a.add(g);var P,T=!u&&t.get("step");i&&i.getArea&&t.get("clip",!0)&&(P=i.getArea(),null!=P.width?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r1+=.5)),this._clipShapeForSymbol=P,h&&d.type===i.type&&T===this._step?(y&&!p?p=this._newPolygon(c,_,i,f):p&&!y&&(g.remove(p),p=this._polygon=null),g.setClipPath(M(i,!1,t)),$&&m.updateData(r,{isIgnore:D,clipShape:P}),r.eachItemGraphicEl((function(t){t.stopAnimation(!0)})),S(this._stackedOnPoints,_)&&S(this._points,c)||(f?this._updateAnimation(r,_,i,n,T,x):(T&&(c=A(c,i,T),_=A(_,i,T)),h.setShape({points:c}),p&&p.setShape({points:c,stackedOnPoints:_})))):($&&m.updateData(r,{isIgnore:D,clipShape:P}),T&&(c=A(c,i,T),_=A(_,i,T)),h=this._newPolyline(c,i,f),y&&(p=this._newPolygon(c,_,i,f)),g.setClipPath(M(i,!0,t)));var N=w(r,i)||r.getVisual("color");h.useStyle(o.defaults(s.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"}));var F=t.get("smooth");if(F=k(t.get("smooth")),h.setShape({smooth:F,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),p){var O=r.getCalculationInfo("stackedOnSeries"),R=0;p.useStyle(o.defaults(l.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel"})),O&&(R=k(O.get("smooth"))),p.setShape({smooth:F,stackedOnSmooth:R,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=r,this._coordSys=i,this._stackedOnPoints=_,this._points=c,this._step=T,this._valueOrigin=x},dispose:function(){},highlight:function(t,e,n,i){var o=t.getData(),a=d.queryDataIndex(o,i);if(!(a instanceof Array)&&null!=a&&a>=0){var r=o.getItemGraphicEl(a);if(!r){var s=o.getItemLayout(a);if(!s)return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(s[0],s[1]))return;r=new l(o,a),r.position=s,r.setZ(t.get("zlevel"),t.get("z")),r.ignore=isNaN(s[0])||isNaN(s[1]),r.__temp=!0,o.setItemGraphicEl(a,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else g.prototype.highlight.call(this,t,e,n,i)},downplay:function(t,e,n,i){var o=t.getData(),a=d.queryDataIndex(o,i);if(null!=a&&a>=0){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else g.prototype.downplay.call(this,t,e,n,i)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new h({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new p({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n,n},_updateAnimation:function(t,e,n,i,o,a){var r=this._polyline,s=this._polygon,l=t.hostModel,d=c(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),m=d.current,h=d.stackedOnCurrent,p=d.next,g=d.stackedOnNext;if(o&&(m=A(d.current,n,o),h=A(d.stackedOnCurrent,n,o),p=A(d.next,n,o),g=A(d.stackedOnNext,n,o)),$(m,p)>3e3||s&&$(h,g)>3e3)return r.setShape({points:p}),void(s&&s.setShape({points:p,stackedOnPoints:g}));r.shape.__points=d.current,r.shape.points=m,u.updateProps(r,{shape:{points:p}},l),s&&(s.setShape({points:m,stackedOnPoints:h}),u.updateProps(s,{shape:{points:p,stackedOnPoints:g}},l));for(var f=[],v=d.status,y=0;y<v.length;y++){var x=v[y].cmd;if("="===x){var b=t.getItemGraphicEl(v[y].idx1);b&&f.push({el:b,ptIdx:y})}}r.animators&&r.animators.length&&r.animators[0].during((function(){for(var t=0;t<f.length;t++){var e=f[t].el;e.attr("position",r.shape.__points[f[t].ptIdx])}}))},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});t.exports=I},89385:function(t,e,n){var i=n(99936),o=i.isDimensionStacked,a=n(33051),r=a.map;function s(t,e,n){var i,a=t.getBaseAxis(),s=t.getOtherAxis(a),c=l(s,n),u=a.dim,d=s.dim,m=e.mapDimension(d),h=e.mapDimension(u),p="x"===d||"radius"===d?1:0,g=r(t.dimensions,(function(t){return e.mapDimension(t)})),f=e.getCalculationInfo("stackResultDimension");return(i|=o(e,g[0]))&&(g[0]=f),(i|=o(e,g[1]))&&(g[1]=f),{dataDimsForPoint:g,valueStart:c,valueAxisDim:d,baseAxisDim:u,stacked:!!i,valueDim:m,baseDim:h,baseDataOffset:p,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function l(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}function c(t,e,n,i){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=t.valueStart);var a=t.baseDataOffset,r=[];return r[a]=n.get(t.baseDim,i),r[1-a]=o,e.dataToPoint(r)}e.prepareDataCoordInfo=s,e.getStackedOnPoint=c},21068:function(t,e,n){var i=n(89385),o=i.prepareDataCoordInfo,a=i.getStackedOnPoint;function r(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}function s(t,e,n,i,s,l,c,u){for(var d=r(t,e),m=[],h=[],p=[],g=[],f=[],v=[],y=[],x=o(s,e,c),b=o(l,t,u),_=0;_<d.length;_++){var S=d[_],$=!0;switch(S.cmd){case"=":var k=t.getItemLayout(S.idx),C=e.getItemLayout(S.idx1);(isNaN(k[0])||isNaN(k[1]))&&(k=C.slice()),m.push(k),h.push(C),p.push(n[S.idx]),g.push(i[S.idx1]),y.push(e.getRawIndex(S.idx1));break;case"+":var A=S.idx;m.push(s.dataToPoint([e.get(x.dataDimsForPoint[0],A),e.get(x.dataDimsForPoint[1],A)])),h.push(e.getItemLayout(A).slice()),p.push(a(x,s,e,A)),g.push(i[A]),y.push(e.getRawIndex(A));break;case"-":A=S.idx;var w=t.getRawIndex(A);w!==A?(m.push(t.getItemLayout(A)),h.push(l.dataToPoint([t.get(b.dataDimsForPoint[0],A),t.get(b.dataDimsForPoint[1],A)])),p.push(n[A]),g.push(a(b,l,t,A)),y.push(w)):$=!1}$&&(f.push(S),v.push(v.length))}v.sort((function(t,e){return y[t]-y[e]}));var L=[],D=[],M=[],I=[],P=[];for(_=0;_<v.length;_++){A=v[_];L[_]=m[A],D[_]=h[A],M[_]=p[A],I[_]=g[A],P[_]=f[A]}return{current:L,next:D,stackedOnCurrent:M,stackedOnNext:I,status:P}}t.exports=s},30633:function(t,e,n){var i=n(10712),o=n(45280),a=n(60873),r=o.min,s=o.max,l=o.scaleAndAdd,c=o.copy,u=[],d=[],m=[];function h(t){return isNaN(t[0])||isNaN(t[1])}function p(t,e,n,i,o,a,r,s,l,c,u){return"none"!==c&&c?g.apply(this,arguments):f.apply(this,arguments)}function g(t,e,n,i,o,a,r,s,l,u,p){for(var g=0,f=n,v=0;v<i;v++){var y=e[f];if(f>=o||f<0)break;if(h(y)){if(p){f+=a;continue}break}if(f===n)t[a>0?"moveTo":"lineTo"](y[0],y[1]);else if(l>0){var x=e[g],b="y"===u?1:0,_=(y[b]-x[b])*l;c(d,x),d[b]=x[b]+_,c(m,y),m[b]=y[b]-_,t.bezierCurveTo(d[0],d[1],m[0],m[1],y[0],y[1])}else t.lineTo(y[0],y[1]);g=f,f+=a}return v}function f(t,e,n,i,a,p,g,f,v,y,x){for(var b=0,_=n,S=0;S<i;S++){var $=e[_];if(_>=a||_<0)break;if(h($)){if(x){_+=p;continue}break}if(_===n)t[p>0?"moveTo":"lineTo"]($[0],$[1]),c(d,$);else if(v>0){var k=_+p,C=e[k];if(x)while(C&&h(e[k]))k+=p,C=e[k];var A=.5,w=e[b];C=e[k];if(!C||h(C))c(m,$);else{var L,D;if(h(C)&&!x&&(C=$),o.sub(u,C,w),"x"===y||"y"===y){var M="x"===y?0:1;L=Math.abs($[M]-w[M]),D=Math.abs($[M]-C[M])}else L=o.dist($,w),D=o.dist($,C);A=D/(D+L),l(m,$,u,-v*(1-A))}r(d,d,f),s(d,d,g),r(m,m,f),s(m,m,g),t.bezierCurveTo(d[0],d[1],m[0],m[1],$[0],$[1]),l(d,$,u,v*A)}else t.lineTo($[0],$[1]);b=_,_+=p}return S}function v(t,e){var n=[1/0,1/0],i=[-1/0,-1/0];if(e)for(var o=0;o<t.length;o++){var a=t[o];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>i[0]&&(i[0]=a[0]),a[1]>i[1]&&(i[1]=a[1])}return{min:e?n:i,max:e?i:n}}var y=i.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:a(i.prototype.brush),buildPath:function(t,e){var n=e.points,i=0,o=n.length,a=v(n,e.smoothConstraint);if(e.connectNulls){for(;o>0;o--)if(!h(n[o-1]))break;for(;i<o;i++)if(!h(n[i]))break}while(i<o)i+=p(t,n,i,o,o,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),x=i.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:a(i.prototype.brush),buildPath:function(t,e){var n=e.points,i=e.stackedOnPoints,o=0,a=n.length,r=e.smoothMonotone,s=v(n,e.smoothConstraint),l=v(i,e.smoothConstraint);if(e.connectNulls){for(;a>0;a--)if(!h(n[a-1]))break;for(;o<a;o++)if(!h(n[o]))break}while(o<a){var c=p(t,n,o,a,a,1,s.min,s.max,e.smooth,r,e.connectNulls);p(t,i,o+c-1,c,a,-1,l.min,l.max,e.stackedOnSmooth,r,e.connectNulls),o+=c+1,t.closePath()}}});e.Polyline=y,e.Polygon=x},88791:function(t,e,n){n(54805),n(42567)},42567:function(t,e,n){var i=n(33051),o=n(51177),a=n(58608),r=n(11726),s=n(49069),l=n(77956),c=l.rectCoordAxisBuildSplitArea,u=l.rectCoordAxisHandleRemove,d=["axisLine","axisTickLabel","axisName"],m=["splitArea","splitLine","minorSplitLine"],h=r.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,r){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new o.Group,this.group.add(this._axisGroup),t.get("show")){var c=t.getCoordSysModel(),u=s.layout(c,t),p=new a(t,u);i.each(d,p.add,p),this._axisGroup.add(p.getGroup()),i.each(m,(function(e){t.get(e+".show")&&this["_"+e](t,c)}),this),o.groupTransition(l,this._axisGroup,t),h.superCall(this,"render",t,e,n,r)}},remove:function(){u(this)},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var a=t.getModel("splitLine"),r=a.getModel("lineStyle"),s=r.get("color");s=i.isArray(s)?s:[s];for(var l=e.coordinateSystem.getRect(),c=n.isHorizontal(),u=0,d=n.getTicksCoords({tickModel:a}),m=[],h=[],p=r.getLineStyle(),g=0;g<d.length;g++){var f=n.toGlobalCoord(d[g].coord);c?(m[0]=f,m[1]=l.y,h[0]=f,h[1]=l.y+l.height):(m[0]=l.x,m[1]=f,h[0]=l.x+l.width,h[1]=f);var v=u++%s.length,y=d[g].tickValue;this._axisGroup.add(new o.Line({anid:null!=y?"line_"+d[g].tickValue:null,subPixelOptimize:!0,shape:{x1:m[0],y1:m[1],x2:h[0],y2:h[1]},style:i.defaults({stroke:s[v]},p),silent:!0}))}}},_minorSplitLine:function(t,e){var n=t.axis,i=t.getModel("minorSplitLine"),a=i.getModel("lineStyle"),r=e.coordinateSystem.getRect(),s=n.isHorizontal(),l=n.getMinorTicksCoords();if(l.length)for(var c=[],u=[],d=a.getLineStyle(),m=0;m<l.length;m++)for(var h=0;h<l[m].length;h++){var p=n.toGlobalCoord(l[m][h].coord);s?(c[0]=p,c[1]=r.y,u[0]=p,u[1]=r.y+r.height):(c[0]=r.x,c[1]=p,u[0]=r.x+r.width,u[1]=p),this._axisGroup.add(new o.Line({anid:"minor_line_"+l[m][h].tickValue,subPixelOptimize:!0,shape:{x1:c[0],y1:c[1],x2:u[0],y2:u[1]},style:d,silent:!0}))}},_splitArea:function(t,e){c(this,this._axisGroup,t,e)}});h.extend({type:"xAxis"}),h.extend({type:"yAxis"})},77956:function(t,e,n){var i=n(33051),o=n(51177);function a(t,e,n,a){var r=n.axis;if(!r.scale.isBlank()){var s=n.getModel("splitArea"),l=s.getModel("areaStyle"),c=l.get("color"),u=a.coordinateSystem.getRect(),d=r.getTicksCoords({tickModel:s,clamp:!0});if(d.length){var m=c.length,h=t.__splitAreaColors,p=i.createHashMap(),g=0;if(h)for(var f=0;f<d.length;f++){var v=h.get(d[f].tickValue);if(null!=v){g=(v+(m-1)*f)%m;break}}var y=r.toGlobalCoord(d[0].coord),x=l.getAreaStyle();c=i.isArray(c)?c:[c];for(f=1;f<d.length;f++){var b,_,S,$,k=r.toGlobalCoord(d[f].coord);r.isHorizontal()?(b=y,_=u.y,S=k-b,$=u.height,y=b+S):(b=u.x,_=y,S=u.width,$=k-_,y=_+$);var C=d[f-1].tickValue;null!=C&&p.set(C,g),e.add(new o.Rect({anid:null!=C?"area_"+C:null,shape:{x:b,y:_,width:S,height:$},style:i.defaults({fill:c[g]},x),silent:!0})),g=(g+1)%m}t.__splitAreaColors=p}}}function r(t){t.__splitAreaColors=null}e.rectCoordAxisBuildSplitArea=a,e.rectCoordAxisHandleRemove=r},84617:function(t,e,n){var i=n(70492),o=n(33051),a=n(51177);n(77532),n(88791),i.extendComponentView({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new a.Rect({shape:t.coordinateSystem.getRect(),style:o.defaults({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),i.registerPreprocessor((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}))},66484:function(t,e,n){var i=n(33051),o={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},a={};a.categoryAxis=i.merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},o),a.valueAxis=i.merge({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},o),a.timeAxis=i.defaults({scale:!0,min:"dataMin",max:"dataMax"},a.valueAxis),a.logAxis=i.defaults({scale:!0,logBase:10},a.valueAxis);var r=a;t.exports=r},21293:function(t,e,n){var i=n(33051),o=n(66484),a=n(98071),r=n(76172),s=r.getLayoutParams,l=r.mergeLayoutParam,c=n(51401),u=["value","category","time","log"];function d(t,e,n,r){i.each(u,(function(a){e.extend({type:t+"Axis."+a,mergeDefaultAndTheme:function(e,o){var r=this.layoutMode,c=r?s(e):{},u=o.getTheme();i.merge(e,u.get(a+"Axis")),i.merge(e,this.getDefaultOption()),e.type=n(t,e),r&&l(e,c,r)},optionUpdated:function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=c.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:i.mergeAll([{},o[a+"Axis"],r],!0)})})),a.registerSubTypeDefaulter(t+"Axis",i.curry(n,t))}t.exports=d},57760:function(t,e,n){var i=n(33051),o=n(3245),a=function(t,e,n,i,a){o.call(this,t,e,n),this.type=i||"value",this.position=a||"bottom"};a.prototype={constructor:a,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},i.inherits(a,o);var r=a;t.exports=r},54805:function(t,e,n){var i=n(33051),o=n(98071),a=n(21293),r=n(16650),s=o.extend({type:"cartesian2dAxis",axis:null,init:function(){s.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){s.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){s.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function l(t,e){return e.type||(e.data?"category":"value")}i.merge(s.prototype,r);var c={offset:0};a("x",s,l,c),a("y",s,l,c);var u=s;t.exports=u},53907:function(t,e,n){var i=n(33051);function o(t){return this._axes[t]}var a=function(t){this._axes={},this._dimList=[],this.name=t||""};a.prototype={constructor:a,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return i.map(this._dimList,o,this)},getAxesByScale:function(t){return t=t.toLowerCase(),i.filter(this.getAxes(),(function(e){return e.scale.type===t}))},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,i=t instanceof Array?[]:{},o=0;o<n.length;o++){var a=n[o],r=this._axes[a];i[a]=r[e](t[a])}return i}};var r=a;t.exports=r},81096:function(t,e,n){var i=n(33051),o=n(60479),a=n(53907);function r(t){a.call(this,t)}r.prototype={constructor:r,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var i=this.getAxis("x"),o=this.getAxis("y");return n=n||[],n[0]=i.toGlobalCoord(i.dataToCoord(t[0])),n[1]=o.toGlobalCoord(o.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,o=n.getExtent(),a=i.getExtent(),r=n.parse(t[0]),s=i.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(o[0],o[1]),r),Math.max(o[0],o[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),i=this.getAxis("y");return e=e||[],e[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=i.coordToData(i.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")},getArea:function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]),a=Math.max(t[0],t[1])-n,r=Math.max(e[0],e[1])-i,s=new o(n,i,a,r);return s}},i.inherits(r,a);var s=r;t.exports=s},77532:function(t,e,n){var i=n(38175),o=(i.__DEV__,n(33051)),a=o.isObject,r=o.each,s=o.map,l=o.indexOf,c=(o.retrieve,n(76172)),u=c.getLayoutRect,d=n(97980),m=d.createScaleByModel,h=d.ifAxisCrossZero,p=d.niceScaleExtent,g=d.estimateLabelUnionRect,f=n(81096),v=n(57760),y=n(95899),x=n(99936),b=x.getStackedDimension;function _(t,e,n){return t.getCoordSysModel()===e}function S(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}n(33927);var $=S.prototype;function k(t,e,n,i){n.getAxesOnZeroOf=function(){return o?[o]:[]};var o,a=t[e],r=n.model,s=r.get("axisLine.onZero"),l=r.get("axisLine.onZeroAxisIndex");if(s){if(null!=l)C(a[l])&&(o=a[l]);else for(var c in a)if(a.hasOwnProperty(c)&&C(a[c])&&!i[u(a[c])]){o=a[c];break}o&&(i[u(o)]=!0)}function u(t){return t.dim+"_"+t.index}}function C(t){return t&&"category"!==t.type&&"time"!==t.type&&h(t)}function A(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}$.type="grid",$.axisPointerEnabled=!0,$.getRect=function(){return this._rect},$.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),r(n.x,(function(t){p(t.scale,t.model)})),r(n.y,(function(t){p(t.scale,t.model)}));var i={};r(n.x,(function(t){k(n,"y",t,i)})),r(n.y,(function(t){k(n,"x",t,i)})),this.resize(this.model,e)},$.resize=function(t,e,n){var i=u(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var o=this._axesList;function a(){r(o,(function(t){var e=t.isHorizontal(),n=e?[0,i.width]:[0,i.height],o=t.inverse?1:0;t.setExtent(n[o],n[1-o]),A(t,e?i.x:i.y)}))}a(),!n&&t.get("containLabel")&&(r(o,(function(t){if(!t.model.get("axisLabel.inside")){var e=g(t);if(e){var n=t.isHorizontal()?"height":"width",o=t.model.get("axisLabel.margin");i[n]-=e[n]+o,"top"===t.position?i.y+=e.height+o:"left"===t.position&&(i.x+=e.width+o)}}})),a())},$.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var i in n)if(n.hasOwnProperty(i))return n[i];return n[e]}},$.getAxes=function(){return this._axesList.slice()},$.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}a(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===e)return o[i]},$.getCartesians=function(){return this._coordsList.slice()},$.convertToPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},$.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(t,e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},$._findConvertTarget=function(t,e){var n,i,o=e.seriesModel,a=e.xAxisModel||o&&o.getReferringComponents("xAxis")[0],r=e.yAxisModel||o&&o.getReferringComponents("yAxis")[0],s=e.gridModel,c=this._coordsList;if(o)n=o.coordinateSystem,l(c,n)<0&&(n=null);else if(a&&r)n=this.getCartesian(a.componentIndex,r.componentIndex);else if(a)i=this.getAxis("x",a.componentIndex);else if(r)i=this.getAxis("y",r.componentIndex);else if(s){var u=s.coordinateSystem;u===this&&(n=this._coordsList[0])}return{cartesian:n,axis:i}},$.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},$._initCartesian=function(t,e,n){var i={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},a={x:0,y:0};if(e.eachComponent("xAxis",s("x"),this),e.eachComponent("yAxis",s("y"),this),!a.x||!a.y)return this._axesMap={},void(this._axesList=[]);function s(n){return function(r,s){if(_(r,t,e)){var l=r.get("position");"x"===n?"top"!==l&&"bottom"!==l&&(l=i.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=i.left?"right":"left"),i[l]=!0;var c=new v(n,m(r),[0,0],r.get("type"),l),u="category"===c.type;c.onBand=u&&r.get("boundaryGap"),c.inverse=r.get("inverse"),r.axis=c,c.model=r,c.grid=this,c.index=s,this._axesList.push(c),o[n][s]=c,a[n]++}}}this._axesMap=o,r(o.x,(function(e,n){r(o.y,(function(i,o){var a="x"+n+"y"+o,r=new f(a);r.grid=this,r.model=t,this._coordsMap[a]=r,this._coordsList.push(r),r.addAxis(e),r.addAxis(i)}),this)}),this)},$._updateScale=function(t,e){function n(t,e,n){r(t.mapDimension(e.dim,!0),(function(n){e.scale.unionExtentFromData(t,b(t,n))}))}r(this._axesList,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeries((function(i){if(D(i)){var o=L(i,t),a=o[0],r=o[1];if(!_(a,e,t)||!_(r,e,t))return;var s=this.getCartesian(a.componentIndex,r.componentIndex),l=i.getData(),c=s.getAxis("x"),u=s.getAxis("y");"list"===l.type&&(n(l,c,i),n(l,u,i))}}),this)},$.getTooltipAxes=function(t){var e=[],n=[];return r(this.getCartesians(),(function(i){var o=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);l(e,o)<0&&e.push(o),l(n,a)<0&&n.push(a)})),{baseAxes:e,otherAxes:n}};var w=["xAxis","yAxis"];function L(t,e){return s(w,(function(e){var n=t.getReferringComponents(e)[0];return n}))}function D(t){return"cartesian2d"===t.get("coordinateSystem")}S.create=function(t,e){var n=[];return t.eachComponent("grid",(function(i,o){var a=new S(i,t,e);a.name="grid_"+o,a.resize(i,e,!0),i.coordinateSystem=a,n.push(a)})),t.eachSeries((function(e){if(D(e)){var n=L(e,t),i=n[0],o=n[1],a=i.getCoordSysModel(),r=a.coordinateSystem;e.coordinateSystem=r.getCartesian(i.componentIndex,o.componentIndex)}})),n},S.dimensions=S.prototype.dimensions=f.prototype.dimensions,y.register("cartesian2d",S);var M=S;t.exports=M},33927:function(t,e,n){n(54805);var i=n(98071),o=i.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});t.exports=o},21149:function(t,e,n){var i=n(33051),o=i.map,a=n(95682),r=n(99936),s=r.isDimensionStacked;function l(t){return{seriesType:t,plan:a(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,i=t.pipelineContext,a=i.large;if(n){var r=o(n.dimensions,(function(t){return e.mapDimension(t)})).slice(0,2),l=r.length,c=e.getCalculationInfo("stackResultDimension");return s(e,r[0])&&(r[0]=c),s(e,r[1])&&(r[1]=c),l&&{progress:u}}function u(t,e){for(var i=t.end-t.start,o=a&&new Float32Array(i*l),s=t.start,c=0,u=[],d=[];s<t.end;s++){var m;if(1===l){var h=e.get(r[0],s);m=!isNaN(h)&&n.dataToPoint(h,null,d)}else{h=u[0]=e.get(r[0],s);var p=u[1]=e.get(r[1],s);m=!isNaN(h)&&!isNaN(p)&&n.dataToPoint(u,null,d)}a?(o[c++]=m?m[0]:NaN,o[c++]=m?m[1]:NaN):e.setItemLayout(s,m&&m.slice()||[NaN,NaN])}a&&e.setLayout("symbolPoints",o)}}}}t.exports=l},64088:function(t){var e={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},n=function(t,e){return Math.round(t.length/2)};function i(t){return{seriesType:t,modifyOutputEnd:!0,reset:function(t,i,o){var a=t.getData(),r=t.get("sampling"),s=t.coordinateSystem;if("cartesian2d"===s.type&&r){var l,c=s.getBaseAxis(),u=s.getOtherAxis(c),d=c.getExtent(),m=Math.abs(d[1]-d[0]),h=Math.round(a.count()/m);if(h>1)"string"===typeof r?l=e[r]:"function"===typeof r&&(l=r),l&&t.setData(a.downSample(a.mapDimension(u.dim),1/h,l,n))}}}}t.exports=i},34586:function(t,e,n){var i=n(33051),o=i.isFunction;function a(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,i,a){var r=t.getData(),s=t.get("symbol"),l=t.get("symbolSize"),c=t.get("symbolKeepAspect"),u=t.get("symbolRotate"),d=o(s),m=o(l),h=o(u),p=d||m||h,g=!d&&s?s:e,f=m?null:l;if(r.setVisual({legendSymbol:n||g,symbol:g,symbolSize:f,symbolKeepAspect:c,symbolRotate:u}),!i.isSeriesFiltered(t))return{dataEach:r.hasItemOption||p?v:null};function v(e,n){if(p){var i=t.getRawValue(n),o=t.getDataParams(n);d&&e.setItemVisual(n,"symbol",s(i,o)),m&&e.setItemVisual(n,"symbolSize",l(i,o)),h&&e.setItemVisual(n,"symbolRotate",u(i,o))}if(e.hasItemOption){var a=e.getItemModel(n),r=a.getShallow("symbol",!0),c=a.getShallow("symbolSize",!0),g=a.getShallow("symbolRotate",!0),f=a.getShallow("symbolKeepAspect",!0);null!=r&&e.setItemVisual(n,"symbol",r),null!=c&&e.setItemVisual(n,"symbolSize",c),null!=g&&e.setItemVisual(n,"symbolRotate",g),null!=f&&e.setItemVisual(n,"symbolKeepAspect",f)}}}}}t.exports=a}}]);