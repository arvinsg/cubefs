"use strict";(self["webpackJsonp_cfs-console"]=self["webpackJsonp_cfs-console"]||[]).push([[853],{81853:function(a,e,t){t.r(e),t.d(e,{default:function(){return d}});var s,l,r=function(){var a=this,e=a._self._c;return e("div",{staticClass:"cluster alarm"},[e("h3",[a._v(a._s(a.$t("chubaoFS.alarm.name")))]),a._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:a.resData.loading,expression:"resData.loading"}],staticClass:"data-block"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.resData.resLists}},[e("el-table-column",{attrs:{prop:"",label:a.$t("chubaoFS.alarm.detail.ClusterID"),width:"180"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n          "+a._s(a.clusterName)+"\n        ")]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"detail",label:a.$t("chubaoFS.alarm.detail.Alarm")},scopedSlots:a._u([{key:"default",fn:function(t){return[e("a",{on:{click:function(e){return a.showDetail(t.row)}}},[a._v(a._s(t.row.detail))])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"hostname",label:a.$t("chubaoFS.alarm.detail.Host")}}),a._v(" "),e("el-table-column",{attrs:{prop:"time",label:a.$t("chubaoFS.alarm.detail.ClusterID")}})],1),a._v(" "),e("div",{staticClass:"clearfix mt20"},[e("el-pagination",{staticClass:"fr",attrs:{"page-sizes":a.resData.page.pageSizes,"page-size":a.resData.page.pageSize,layout:"sizes, prev, pager, next",total:a.resData.page.totalRecord},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange}}),a._v(" "),e("span",{staticClass:"fr page-tips pr10"},[a._v(a._s(a.$t("chubaoFS.commonTxt.eachPageShows")))])],1)],1),a._v(" "),e("el-dialog",{attrs:{title:a.$t("chubaoFS.alarm.name"),visible:a.detailDialog,width:"35%"},on:{"update:visible":function(e){a.detailDialog=e}}},[a.alarmInfo?e("div",[e("el-row",{staticClass:"mb20",attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("span",{staticClass:"alarm-key mr10"},[a._v(a._s(a.$t("chubaoFS.alarm.name"))+":")]),e("span",[a._v(a._s(a.clusterName))])]),a._v(" "),e("el-col",{attrs:{span:12}},[e("span",{staticClass:"alarm-key mr10"},[a._v(a._s(a.$t("chubaoFS.alarm.detail.Host"))+":")]),e("span",[a._v(a._s(a.alarmInfo.hostname))])])],1),a._v(" "),e("el-row",{staticClass:"mb20"},[e("span",{staticClass:"alarm-key mr10"},[a._v(a._s(a.$t("chubaoFS.alarm.detail.Time"))+":")]),e("span",[a._v(a._s(a.alarmInfo.time))])]),a._v(" "),e("p",{staticClass:"mb20"},[a._v(a._s(a.alarmInfo.detail))])],1):a._e()])],1)},i=[],n=(t(89730),t(34284),t(2106)),o=t(4969),c={queryAlarmList:(0,o.ZP)(s||(s=(0,n.Z)(["query AlarmList($size:int32) {\n    alarmList(size:$size){\n      detail\n      hostname\n      key\n      time\n      type\n      value\n    }\n  }"]))),clusterView:(0,o.ZP)(l||(l=(0,n.Z)(["query clusterView{\n    clusterView{\n        name\n      }\n    }"])))},u=c,h={name:"alarm",data:function(){return{clusterName:null,storageLists:[],resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},signUrlDialog:!1,alarmInfo:null,detailDialog:!1}},methods:{showDetail:function(a){this.alarmInfo=a,this.detailDialog=!0},handleSizeChange:function(a){this.resData.page.pageSize=a,this.resData.page.pageNo=1,this.handleCurrentChange(1)},handleCurrentChange:function(a){this.resData.page.pageNo=a;var e=(a-1)*this.resData.page.pageSize,t=a*this.resData.page.pageSize;this.resData.resLists=this.storageLists.slice(e,t)},queryList:function(){var a=this,e=this;e.resData.loading=!0;var t={size:1e3};this.apollo.query(this.url.consoleCluster,u.queryAlarmList,t).then((function(t){if(e.resData.loading=!1,t.code)a.$message.error(t.message);else{var s=t.data.alarmList;a.storageLists=s,a.resData.page.totalRecord=s.length,a.handleCurrentChange(1)}})).catch((function(a){e.resData.loading=!1,console.log(a)}))},queryClusterView:function(){var a=this,e=this,t={};this.apollo.query(this.url.consoleCluster,u.clusterView,t).then((function(t){if(e.resData.loading=!1,t.code)a.$message.error(t);else{var s=t.data.clusterView;a.clusterName=s.name}})).catch((function(a){console.log(a)}))}},mounted:function(){this.queryClusterView(),this.queryList()}},m=h,g=t(1001),p=(0,g.Z)(m,r,i,!1,null,"9e2e4f3a",null),d=p.exports}}]);